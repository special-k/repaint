var ENV=ENV||function(){function e(e){var a=parseFloat(e).toFixed(2);return e>60&&(minutes=Math.floor(e/60),comps=(e%60).toFixed(2).split("."),seconds=comps[0].lpad("0",2),ms=comps[1],a=minutes+":"+seconds+"."+ms),a}function a(e){var a="Query elapsed";return a+=e>=10?" warn_long":e>=1?" warn":" short"}function t(e){var a="label";return a+=e>=20?" label-important":e>=10?" label-warning":" label-success"}function r(t){t||(t={});var r=15*Math.random();return t.elapsed=r,t.formatElapsed=e(r),t.elapsedClassName=a(r),t.query="SELECT blah FROM something",t.waiting=Math.random()<.5,Math.random()<.2&&(t.query="<IDLE> in transaction"),Math.random()<.1&&(t.query="vacuum"),t}function s(e){return e?(e.formatElapsed="",e.elapsedClassName="",e.query="",e.elapsed=null,e.waiting=null,void 0):{query:"***",formatElapsed:"",elapsedClassName:""}}function l(e,a,l){var n=Math.floor(10*Math.random()+1);if(e||(e={}),e.lastMutationId=l,e.nbQueries=n,e.lastSample||(e.lastSample={}),e.lastSample.topFiveQueries||(e.lastSample.topFiveQueries=[]),a){if(!e.lastSample.queries){e.lastSample.queries=[];for(var o=0;12>o;o++)e.lastSample.queries[o]=s()}for(var u in e.lastSample.queries){var i=e.lastSample.queries[u];n>=u?r(i):s(i)}}else{e.lastSample.queries=[];for(var u=0;12>u;u++)if(n>u){var i=r(s());e.lastSample.queries.push(i)}else e.lastSample.queries.push(s())}for(var m=0;5>m;m++){var p=e.lastSample.queries[m];e.lastSample.topFiveQueries[m]=p}return e.lastSample.nbQueries=n,e.lastSample.countClassName=t(n),e}function n(e){var a=u;if(!e){u=[];for(var t=1;t<=ENV.rows;t++)u.push({dbname:"cluster"+t,query:"",formatElapsed:"",elapsedClassName:""}),u.push({dbname:"cluster"+t+" slave",query:"",formatElapsed:"",elapsedClassName:""})}if(!u){u=[];for(var t=1;t<=ENV.rows;t++)u.push({dbname:"cluster"+t}),u.push({dbname:"cluster"+t+" slave"});a=u}for(var t in u){var r=u[t];!e&&a&&a[t]&&(r.lastSample=a[t].lastSample),!r.lastSample||Math.random()<ENV.mutations()?(p+=1,e||(r.lastSample=null),l(r,e,p)):u[t]=a[t]}return m=!1,{toArray:function(){return u}}}function o(e){return e?d=e:d}var u,i,m=!0,p=0;(i=String.prototype).lpad||(i.lpad=function(e,a){return e.repeat((a-this.length)/e.length).concat(this)});var d=.5,c=document.querySelector("body"),f=c.firstChild,v=document.createElement("div");v.style.cssText="display: flex";var h=document.createElement("input"),S=document.createElement("label");return S.innerHTML="mutations : "+(100*d).toFixed(0)+"%",S.id="ratioval",h.setAttribute("type","range"),h.style.cssText="margin-bottom: 10px; margin-top: 5px",h.addEventListener("change",function(e){ENV.mutations(e.target.value/100),document.querySelector("#ratioval").innerHTML="mutations : "+(100*ENV.mutations()).toFixed(0)+"%"}),v.appendChild(S),v.appendChild(h),c.insertBefore(v,f),{generateData:n,rows:50,timeout:0,mutations:o}}();
